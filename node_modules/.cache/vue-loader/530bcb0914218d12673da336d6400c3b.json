<<<<<<< HEAD
{"remainingRequest":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/natalie/Desktop/BT3103/project/YourSingapore/src/components/Planner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/src/components/Planner.vue","mtime":1602914311816},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/cache-loader/dist/cjs.js","mtime":1602869003732},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/babel-loader/lib/index.js","mtime":1602869003458},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/cache-loader/dist/cjs.js","mtime":1602869003732},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/vue-loader/lib/index.js","mtime":1602869014536}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQbGFubmVkQWN0aXZpdHkgZnJvbSAiQC9jb21wb25lbnRzL1BsYW5uZWRBY3Rpdml0eSI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJAL2ZpcmViYXNlIjsKaW1wb3J0ICdmaXJlYmFzZS9zdG9yYWdlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGxhbm5lci52dWUiLAogIGNvbXBvbmVudHM6IHtQbGFubmVkQWN0aXZpdHl9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRlOiAnJywKICAgICAgcGxhbm5lZEFjdGl2aXRpZXM6IFtdLAogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSA6IGFzeW5jIGZ1bmN0aW9uKG5hbWUpewogICAgICBjb25zdCBVUkw9Imh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9wbGFjZS90ZXh0c2VhcmNoL2pzb24/cXVlcnk9IituYW1lKyIma2V5PUFJemFTeUFPOE5GYVl2eVVST19vLTRLdkNtaHlNcVBmeDNMTmVtSSI7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQoVVJMKS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgdGhpcy5yZXN1bHRzPXJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICAvLyBPbmx5IG9idGFpbiB0aGUgdG9wIHJlc3VsdAogICAgICAgIHZhciBhZGRyZXNzID0gdGhpcy5yZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzCiAgICAgICAgY29uc29sZS5sb2coIkFERFJFU1M6ICIgKyBhZGRyZXNzKQogICAgICAgIHJldHVybiBhZGRyZXNzCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSkKICAgIH0sCgogICAgc2hhcmU6IGZ1bmN0aW9uKCkgewogICAgICBodG1sMmNhbnZhcyhkb2N1bWVudC5ib2R5LCB7YWxsb3dUYWludDogdHJ1ZSwgdXNlQ09SUzogdHJ1ZX0pLnRoZW4oZnVuY3Rpb24oY2FudmFzKSB7CiAgICAgICAgY29uc29sZS5sb2coIlNIQVJSRUVFRSIpCiAgICAgICAgY29uc29sZS5sb2coY2FudmFzKQogICAgICAgIC8vIENyZWF0ZSB1bmlxdWUgaWRlbnRpZmllciBVVUlECiAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgIHZhciByID0gKGR0ICsgTWF0aC5yYW5kb20oKSoxNiklMTYgfCAwOwogICAgICAgICAgZHQgPSBNYXRoLmZsb29yKGR0LzE2KTsKICAgICAgICAgIHJldHVybiAoYz09J3gnID8gciA6KHImMHgzfDB4OCkpLnRvU3RyaW5nKDE2KTsKICAgICAgICB9KTsKCiAgICAgICAgLy92YXIgaW1hZ2UgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKS5yZXBsYWNlKCJpbWFnZS9wbmciLCAiaW1hZ2Uvb2N0ZXQtc3RyZWFtIik7ICAvLyBoZXJlIGlzIHRoZSBtb3N0IGltcG9ydGFudCBwYXJ0IGJlY2F1c2UgaWYgeW91IGRvbnQgcmVwbGFjZSB5b3Ugd2lsbCBnZXQgYSBET00gMTggZXhjZXB0aW9uLgogICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmPWltYWdlOy8vIGl0IHdpbGwgc2F2ZSBsb2NhbGx5CgogICAgICAgIC8vIFNUT1JFIFBMQU5ORVIgSU4gRklSRUJBU0UKICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UucmVmKCk7CiAgICAgICAgY2FudmFzLnRvQmxvYihmdW5jdGlvbihibG9iKXsKICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgaW1hZ2Uuc3JjID0gYmxvYjsKICAgICAgICAgIHZhciBwbGFubmVyUmVmID0gc3RvcmFnZVJlZi5jaGlsZCgnaW1hZ2VzL3BsYW5uZXIvJyArIHV1aWQpOwogICAgICAgICAgcGxhbm5lclJlZi5wdXQoYmxvYikudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgcGxhbm5lclJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAvLyBjYWxsIG91dCBlbWFpbCBjbGllbnQKICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICJtYWlsdG86P3N1YmplY3Q9WW91ciUyMFNpbmdhcG9yZSUyMEl0aW5lcmFyeSZib2R5PUhlbGxvJTIwdGhlcmUhJTBEJTBBJTBEJTBBR2l2ZW4lMjB0aGF0JTIwYWlyJTIwdHJhdmVsJTIwd29uJ3QlMjBiZSUyMGhhcHBlbmluZyUyMHNvb24lMkMlMjBJJTIwaGF2ZSUyMGRlY2lkZWQlMjB0byUyMHBsYW4lMjBhJTIwaG9saWRheSUyMGluJTIwU2luZ2Fwb3JlLiUyMEl0JTIwd291bGQlMjBiZSUyMGdyZWF0JTIwaWYlMjB5b3UlMjBjb3VsZCUyMGpvaW4lMjBtZSUyMG9uJTIwbXklMjB0cmlwJTIwJTNBRCUyMCUwRCUwQSUwRCUwQUF0dGFjaGVkJTIwaXMlMjBteSUyMGl0aW5lcmFyeS4lMjAiICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlc3VsdCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1lc3NhZ2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgdmFyIHBsYW5uZWRBY3Rpdml0eSA9IHsKICAgICAgbmFtZTogJycsCiAgICAgIGFkZHJlc3M6ICcnLAogICAgICBwaWN0dXJlOiAnJywKICAgICAgaG91cjogJycsCiAgICAgIG1pbjogJycsCiAgICAgIGFtOiAnJywKICAgIH07CiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZGF0ZSkgewogICAgICB0aGlzLmRhdGUgPSBzZXNzaW9uU3RvcmFnZS5kYXRlOwogICAgfQogICAgaWYoc2Vzc2lvblN0b3JhZ2UuaG91cil7CiAgICAgIHBsYW5uZWRBY3Rpdml0eS5ob3VyID0gc2Vzc2lvblN0b3JhZ2UuaG91ciAvL1Nlc3Npb24gc3RvcmFnZTogT25jZSBhZGRlZCB0byB0aGUgcGxhbm5lciwgbmVlZCB0byBzdG9yZSB0aGUgdmFsdWUgaW4gYSBzZXBhcmF0ZSB2YXJpYWJsZSBiYyBvbmNlIHRoZXkgYWRkIGFub3RoZXIgYXR0cmFjdGlvbiwgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGwgZGlzYXBwZWFyCiAgICB9CiAgICBpZihzZXNzaW9uU3RvcmFnZS5taW4pewogICAgICBwbGFubmVkQWN0aXZpdHkubWluID0gc2Vzc2lvblN0b3JhZ2UubWluCiAgICB9CiAgICBpZihzZXNzaW9uU3RvcmFnZS5hbSl7CiAgICAgIHBsYW5uZWRBY3Rpdml0eS5hbSA9IHNlc3Npb25TdG9yYWdlLmFtCiAgICB9CiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UucGljdHVyZSkgewogICAgICBwbGFubmVkQWN0aXZpdHkucGljdHVyZSA9IHNlc3Npb25TdG9yYWdlLnBpY3R1cmUKICAgIH0KICAgIHBsYW5uZWRBY3Rpdml0eS5hZGRyZXNzID0gdGhpcy5hZGRyZXNzCiAgICBpZihzZXNzaW9uU3RvcmFnZS5uYW1lKXsKICAgICAgY29uc29sZS5sb2coJ05BTUUnKQogICAgICBwbGFubmVkQWN0aXZpdHkubmFtZSA9IHNlc3Npb25TdG9yYWdlLm5hbWUKICAgICAgdGhpcy5mZXRjaERhdGEocGxhbm5lZEFjdGl2aXR5Lm5hbWUpLnRoZW4odmFsdWUgPT4gewogICAgICAgIHBsYW5uZWRBY3Rpdml0eS5hZGRyZXNzID0gdmFsdWU7CiAgICAgIH0pCiAgICAgIC8vIGFkZCBwbGFubmVkQWN0aXZpdHkgdG8gcGxhbm5lZEFjdGl2aXRpZXMgYXJyYXkKICAgICAgdGhpcy5wbGFubmVkQWN0aXZpdGllcy5wdXNoKHBsYW5uZWRBY3Rpdml0eSkKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["Planner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Planner.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"main\">\n    <h1>{{this.date}}</h1>\n    <div id=\"maskReminder\">\n      <h3>ðŸ˜· MASK UP ðŸ˜·</h3>\n    </div>\n    <div v-for=\"activity in plannedActivities\" v-bind:key=\"activity.id\">\n      <PlannedActivity v-bind:activity=\"activity\"></PlannedActivity>\n    </div>\n    <button class=\"ui button\" v-on:click=\"share\">Share</button>\n    <!-- Eateries REPLACE ROUTER LINK!!-->\n    <button class=\"ui button\" v-on:click=\"$router.push('/home')\">Explore Food Options</button>\n    <!-- Attractions REPLACE ROUTER LINK!!-->\n    <button class=\"ui button\" v-on:click=\"$router.push('/activityList')\">Explore More Attractions</button>\n  </div>\n</template>\n\n<script>\nimport PlannedActivity from \"@/components/PlannedActivity\";\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\nimport firebase from \"@/firebase\";\nimport 'firebase/storage';\n\nexport default {\n  name: \"Planner.vue\",\n  components: {PlannedActivity},\n  data() {\n    return {\n      date: '',\n      plannedActivities: [],\n    }\n  },\n\n  methods: {\n    fetchData : async function(name){\n      const URL=\"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/textsearch/json?query=\"+name+\"&key=AIzaSyAO8NFaYvyURO_o-4KvCmhyMqPfx3LNemI\";\n      return await axios.get(URL).then(response=>{\n        this.results=response.data.results;\n        // Only obtain the top result\n        var address = this.results[0].formatted_address\n        console.log(\"ADDRESS: \" + address)\n        return address\n      }).catch(error => console.log(error))\n    },\n\n    share: function() {\n      html2canvas(document.body, {allowTaint: true, useCORS: true}).then(function(canvas) {\n        console.log(\"SHARREEEE\")\n        console.log(canvas)\n        // Create unique identifier UUID\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n          var r = (dt + Math.random()*16)%16 | 0;\n          dt = Math.floor(dt/16);\n          return (c=='x' ? r :(r&0x3|0x8)).toString(16);\n        });\n\n        //var image = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");  // here is the most important part because if you dont replace you will get a DOM 18 exception.\n        // window.location.href=image;// it will save locally\n\n        // STORE PLANNER IN FIREBASE\n        var storageRef = firebase.storage.ref();\n        canvas.toBlob(function(blob){\n          var image = new Image();\n          image.src = blob;\n          var plannerRef = storageRef.child('images/planner/' + uuid);\n          plannerRef.put(blob).then(function() {\n            plannerRef.getDownloadURL().then(function(result){\n              // call out email client\n              var message = \"mailto:?subject=Your%20Singapore%20Itinerary&body=Hello%20there!%0D%0A%0D%0AGiven%20that%20air%20travel%20won't%20be%20happening%20soon%2C%20I%20have%20decided%20to%20plan%20a%20holiday%20in%20Singapore.%20It%20would%20be%20great%20if%20you%20could%20join%20me%20on%20my%20trip%20%3AD%20%0D%0A%0D%0AAttached%20is%20my%20itinerary.%20\" + encodeURIComponent(result);\n              console.log(message);\n              console.log(result);\n              window.location.href = message;\n            });\n          });\n        });\n      });\n    },\n  },\n\n  mounted() {\n    var plannedActivity = {\n      name: '',\n      address: '',\n      picture: '',\n      hour: '',\n      min: '',\n      am: '',\n    };\n    if (sessionStorage.date) {\n      this.date = sessionStorage.date;\n    }\n    if(sessionStorage.hour){\n      plannedActivity.hour = sessionStorage.hour //Session storage: Once added to the planner, need to store the value in a separate variable bc once they add another attraction, the previous value will disappear\n    }\n    if(sessionStorage.min){\n      plannedActivity.min = sessionStorage.min\n    }\n    if(sessionStorage.am){\n      plannedActivity.am = sessionStorage.am\n    }\n    if (sessionStorage.picture) {\n      plannedActivity.picture = sessionStorage.picture\n    }\n    plannedActivity.address = this.address\n    if(sessionStorage.name){\n      console.log('NAME')\n      plannedActivity.name = sessionStorage.name\n      this.fetchData(plannedActivity.name).then(value => {\n        plannedActivity.address = value;\n      })\n      // add plannedActivity to plannedActivities array\n      this.plannedActivities.push(plannedActivity)\n    }\n  },\n}\n</script>\n\n<style scoped>\n  #main {\n    width: 60%;\n    position: relative;\n    left: 20%;\n    top: 40px;\n  }\n\n  #maskReminder {\n    background-color: rgba(255,248,248,0.2);\n    padding: 20px 30px;\n    border-radius: 20px;\n    text-align: center;\n    margin: 15px 0;\n  }\n\n  .ui.button {\n    margin: 0 10px;\n    padding: 5px 10px;\n  }\n</style>"]}]}
=======
{"remainingRequest":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/natalie/Desktop/BT3103/project/YourSingapore/src/components/Planner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/src/components/Planner.vue","mtime":1602915229407},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/cache-loader/dist/cjs.js","mtime":1602869003732},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/babel-loader/lib/index.js","mtime":1602869003458},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/cache-loader/dist/cjs.js","mtime":1602869003732},{"path":"/Users/natalie/Desktop/BT3103/project/YourSingapore/node_modules/vue-loader/lib/index.js","mtime":1602869014536}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQbGFubmVkQWN0aXZpdHkgZnJvbSAiQC9jb21wb25lbnRzL1BsYW5uZWRBY3Rpdml0eSI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJAL2ZpcmViYXNlIjsKaW1wb3J0ICdmaXJlYmFzZS9zdG9yYWdlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGxhbm5lci52dWUiLAogIGNvbXBvbmVudHM6IHtQbGFubmVkQWN0aXZpdHl9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRlOiAnJywKICAgICAgcGxhbm5lZEFjdGl2aXRpZXM6IFtdLAogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoRGF0YSA6IGFzeW5jIGZ1bmN0aW9uKG5hbWUpewogICAgICBjb25zdCBVUkw9Imh0dHBzOi8vY29ycy1hbnl3aGVyZS5oZXJva3VhcHAuY29tL2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9wbGFjZS90ZXh0c2VhcmNoL2pzb24/cXVlcnk9IituYW1lKyIma2V5PUFJemFTeUFPOE5GYVl2eVVST19vLTRLdkNtaHlNcVBmeDNMTmVtSSI7CiAgICAgIHJldHVybiBhd2FpdCBheGlvcy5nZXQoVVJMKS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgdGhpcy5yZXN1bHRzPXJlc3BvbnNlLmRhdGEucmVzdWx0czsKICAgICAgICAvLyBPbmx5IG9idGFpbiB0aGUgdG9wIHJlc3VsdAogICAgICAgIHZhciBhZGRyZXNzID0gdGhpcy5yZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzCiAgICAgICAgY29uc29sZS5sb2coIkFERFJFU1M6ICIgKyBhZGRyZXNzKQogICAgICAgIHJldHVybiBhZGRyZXNzCiAgICAgIH0pLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSkKICAgIH0sCgogICAgc2hhcmU6IGZ1bmN0aW9uKCkgewogICAgICBodG1sMmNhbnZhcyhkb2N1bWVudC5ib2R5LCB7YWxsb3dUYWludDogdHJ1ZSwgdXNlQ09SUzogdHJ1ZX0pLnRoZW4oZnVuY3Rpb24oY2FudmFzKSB7CiAgICAgICAgY29uc29sZS5sb2coIlNIQVJSRUVFRSIpCiAgICAgICAgY29uc29sZS5sb2coY2FudmFzKQogICAgICAgIC8vIENyZWF0ZSB1bmlxdWUgaWRlbnRpZmllciBVVUlECiAgICAgICAgdmFyIGR0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgdmFyIHV1aWQgPSAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uKGMpIHsKICAgICAgICAgIHZhciByID0gKGR0ICsgTWF0aC5yYW5kb20oKSoxNiklMTYgfCAwOwogICAgICAgICAgZHQgPSBNYXRoLmZsb29yKGR0LzE2KTsKICAgICAgICAgIHJldHVybiAoYz09J3gnID8gciA6KHImMHgzfDB4OCkpLnRvU3RyaW5nKDE2KTsKICAgICAgICB9KTsKCiAgICAgICAgLy92YXIgaW1hZ2UgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKS5yZXBsYWNlKCJpbWFnZS9wbmciLCAiaW1hZ2Uvb2N0ZXQtc3RyZWFtIik7ICAvLyBoZXJlIGlzIHRoZSBtb3N0IGltcG9ydGFudCBwYXJ0IGJlY2F1c2UgaWYgeW91IGRvbnQgcmVwbGFjZSB5b3Ugd2lsbCBnZXQgYSBET00gMTggZXhjZXB0aW9uLgogICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5ocmVmPWltYWdlOy8vIGl0IHdpbGwgc2F2ZSBsb2NhbGx5CgogICAgICAgIC8vIFNUT1JFIFBMQU5ORVIgSU4gRklSRUJBU0UKICAgICAgICB2YXIgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UucmVmKCk7CiAgICAgICAgY2FudmFzLnRvQmxvYihmdW5jdGlvbihibG9iKXsKICAgICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpOwogICAgICAgICAgaW1hZ2Uuc3JjID0gYmxvYjsKICAgICAgICAgIHZhciBwbGFubmVyUmVmID0gc3RvcmFnZVJlZi5jaGlsZCgnaW1hZ2VzL3BsYW5uZXIvJyArIHV1aWQpOwogICAgICAgICAgcGxhbm5lclJlZi5wdXQoYmxvYikudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgcGxhbm5lclJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXsKICAgICAgICAgICAgICAvLyBjYWxsIG91dCBlbWFpbCBjbGllbnQKICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICJtYWlsdG86P3N1YmplY3Q9WW91ciUyMFNpbmdhcG9yZSUyMEl0aW5lcmFyeSZib2R5PUhlbGxvJTIwdGhlcmUhJTBEJTBBJTBEJTBBR2l2ZW4lMjB0aGF0JTIwYWlyJTIwdHJhdmVsJTIwd29uJ3QlMjBiZSUyMGhhcHBlbmluZyUyMHNvb24lMkMlMjBJJTIwaGF2ZSUyMGRlY2lkZWQlMjB0byUyMHBsYW4lMjBhJTIwaG9saWRheSUyMGluJTIwU2luZ2Fwb3JlLiUyMEl0JTIwd291bGQlMjBiZSUyMGdyZWF0JTIwaWYlMjB5b3UlMjBjb3VsZCUyMGpvaW4lMjBtZSUyMG9uJTIwbXklMjB0cmlwJTIwJTNBRCUyMCUwRCUwQSUwRCUwQUF0dGFjaGVkJTIwaXMlMjBteSUyMGl0aW5lcmFyeS4lMjAiICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlc3VsdCk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSk7CiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1lc3NhZ2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgdmFyIHBsYW5uZWRBY3Rpdml0eSA9IHsKICAgICAgbmFtZTogJycsCiAgICAgIGFkZHJlc3M6ICcnLAogICAgICBwaWN0dXJlOiAnJywKICAgICAgaG91cjogJycsCiAgICAgIG1pbjogJycsCiAgICAgIGFtOiAnJywKICAgIH07CiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UuZGF0ZSkgewogICAgICB0aGlzLmRhdGUgPSBzZXNzaW9uU3RvcmFnZS5kYXRlOwogICAgfQogICAgaWYoc2Vzc2lvblN0b3JhZ2UuaG91cil7CiAgICAgIHBsYW5uZWRBY3Rpdml0eS5ob3VyID0gc2Vzc2lvblN0b3JhZ2UuaG91ciAvL1Nlc3Npb24gc3RvcmFnZTogT25jZSBhZGRlZCB0byB0aGUgcGxhbm5lciwgbmVlZCB0byBzdG9yZSB0aGUgdmFsdWUgaW4gYSBzZXBhcmF0ZSB2YXJpYWJsZSBiYyBvbmNlIHRoZXkgYWRkIGFub3RoZXIgYXR0cmFjdGlvbiwgdGhlIHByZXZpb3VzIHZhbHVlIHdpbGwgZGlzYXBwZWFyCiAgICB9CiAgICBpZihzZXNzaW9uU3RvcmFnZS5taW4pewogICAgICBwbGFubmVkQWN0aXZpdHkubWluID0gc2Vzc2lvblN0b3JhZ2UubWluCiAgICB9CiAgICBpZihzZXNzaW9uU3RvcmFnZS5hbSl7CiAgICAgIHBsYW5uZWRBY3Rpdml0eS5hbSA9IHNlc3Npb25TdG9yYWdlLmFtCiAgICB9CiAgICBpZiAoc2Vzc2lvblN0b3JhZ2UucGljdHVyZSkgewogICAgICBwbGFubmVkQWN0aXZpdHkucGljdHVyZSA9IHNlc3Npb25TdG9yYWdlLnBpY3R1cmUKICAgIH0KICAgIHBsYW5uZWRBY3Rpdml0eS5hZGRyZXNzID0gdGhpcy5hZGRyZXNzCiAgICBpZihzZXNzaW9uU3RvcmFnZS5uYW1lKXsKICAgICAgY29uc29sZS5sb2coJ05BTUUnKQogICAgICBwbGFubmVkQWN0aXZpdHkubmFtZSA9IHNlc3Npb25TdG9yYWdlLm5hbWUKICAgICAgdGhpcy5mZXRjaERhdGEocGxhbm5lZEFjdGl2aXR5Lm5hbWUpLnRoZW4odmFsdWUgPT4gewogICAgICAgIHBsYW5uZWRBY3Rpdml0eS5hZGRyZXNzID0gdmFsdWU7CiAgICAgIH0pCiAgICAgIC8vIGFkZCBwbGFubmVkQWN0aXZpdHkgdG8gcGxhbm5lZEFjdGl2aXRpZXMgYXJyYXkKICAgICAgdGhpcy5wbGFubmVkQWN0aXZpdGllcy5wdXNoKHBsYW5uZWRBY3Rpdml0eSkKICAgIH0KICB9LAp9Cg=="},{"version":3,"sources":["Planner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Planner.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"main\">\n    <h1>{{this.date}}</h1>\n    <div id=\"maskReminder\">\n      <h3>ðŸ˜· MASK UP ðŸ˜·</h3>\n    </div>\n    <div v-for=\"activity in plannedActivities\" v-bind:key=\"activity.id\">\n      <PlannedActivity v-bind:activity=\"activity\"></PlannedActivity>\n    </div>\n    <button class=\"ui button\" v-on:click=\"share\">Share</button>\n    <!-- Eateries REPLACE ROUTER LINK!!-->\n    <button class=\"ui button\" v-on:click=\"$router.push('/home')\">Explore Food Options</button>\n    <!-- Attractions REPLACE ROUTER LINK!!-->\n    <button class=\"ui button\" v-on:click=\"$router.push('/activityList')\">Explore More Attractions</button>\n  </div>\n</template>\n\n<script>\nimport PlannedActivity from \"@/components/PlannedActivity\";\nimport axios from 'axios';\nimport html2canvas from 'html2canvas';\nimport firebase from \"@/firebase\";\nimport 'firebase/storage';\n\nexport default {\n  name: \"Planner.vue\",\n  components: {PlannedActivity},\n  data() {\n    return {\n      date: '',\n      plannedActivities: [],\n    }\n  },\n\n  methods: {\n    fetchData : async function(name){\n      const URL=\"https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/textsearch/json?query=\"+name+\"&key=AIzaSyAO8NFaYvyURO_o-4KvCmhyMqPfx3LNemI\";\n      return await axios.get(URL).then(response=>{\n        this.results=response.data.results;\n        // Only obtain the top result\n        var address = this.results[0].formatted_address\n        console.log(\"ADDRESS: \" + address)\n        return address\n      }).catch(error => console.log(error))\n    },\n\n    share: function() {\n      html2canvas(document.body, {allowTaint: true, useCORS: true}).then(function(canvas) {\n        console.log(\"SHARREEEE\")\n        console.log(canvas)\n        // Create unique identifier UUID\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n          var r = (dt + Math.random()*16)%16 | 0;\n          dt = Math.floor(dt/16);\n          return (c=='x' ? r :(r&0x3|0x8)).toString(16);\n        });\n\n        //var image = canvas.toDataURL(\"image/png\").replace(\"image/png\", \"image/octet-stream\");  // here is the most important part because if you dont replace you will get a DOM 18 exception.\n        // window.location.href=image;// it will save locally\n\n        // STORE PLANNER IN FIREBASE\n        var storageRef = firebase.storage.ref();\n        canvas.toBlob(function(blob){\n          var image = new Image();\n          image.src = blob;\n          var plannerRef = storageRef.child('images/planner/' + uuid);\n          plannerRef.put(blob).then(function() {\n            plannerRef.getDownloadURL().then(function(result){\n              // call out email client\n              var message = \"mailto:?subject=Your%20Singapore%20Itinerary&body=Hello%20there!%0D%0A%0D%0AGiven%20that%20air%20travel%20won't%20be%20happening%20soon%2C%20I%20have%20decided%20to%20plan%20a%20holiday%20in%20Singapore.%20It%20would%20be%20great%20if%20you%20could%20join%20me%20on%20my%20trip%20%3AD%20%0D%0A%0D%0AAttached%20is%20my%20itinerary.%20\" + encodeURIComponent(result);\n              console.log(message);\n              console.log(result);\n              window.location.href = message;\n            });\n          });\n        });\n      });\n    },\n  },\n\n  mounted() {\n    var plannedActivity = {\n      name: '',\n      address: '',\n      picture: '',\n      hour: '',\n      min: '',\n      am: '',\n    };\n    if (sessionStorage.date) {\n      this.date = sessionStorage.date;\n    }\n    if(sessionStorage.hour){\n      plannedActivity.hour = sessionStorage.hour //Session storage: Once added to the planner, need to store the value in a separate variable bc once they add another attraction, the previous value will disappear\n    }\n    if(sessionStorage.min){\n      plannedActivity.min = sessionStorage.min\n    }\n    if(sessionStorage.am){\n      plannedActivity.am = sessionStorage.am\n    }\n    if (sessionStorage.picture) {\n      plannedActivity.picture = sessionStorage.picture\n    }\n    plannedActivity.address = this.address\n    if(sessionStorage.name){\n      console.log('NAME')\n      plannedActivity.name = sessionStorage.name\n      this.fetchData(plannedActivity.name).then(value => {\n        plannedActivity.address = value;\n      })\n      // add plannedActivity to plannedActivities array\n      this.plannedActivities.push(plannedActivity)\n    }\n  },\n}\n</script>\n\n<style scoped>\n  #main {\n    width: 60%;\n    position: relative;\n    left: 20%;\n    top: 40px;\n  }\n\n  #maskReminder {\n    background-color: rgba(255,248,248,0.2);\n    padding: 20px 30px;\n    border-radius: 20px;\n    text-align: center;\n    margin: 15px 0;\n  }\n\n  .ui.button {\n    margin: 0 10px;\n    padding: 5px 10px;\n  }\n</style>"]}]}
>>>>>>> master
